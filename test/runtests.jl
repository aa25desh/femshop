using Femshop
using Test

@testset "Femshop.jl" begin

    @useLog("poisson1dlog")
    @domain(1)                      # dimension
    @functionSpace(LEGENDRE, 4)     # basis function, order
    
    @mesh(LINEMESH, 20)             # build uniform LINEMESH. 2nd arg=# of elements, (optional)3rd arg=# of BIDs
    
    @variable(u)                    # same as @variable(u, SCALAR)
    @testSymbol(v)                  # sets the symbol for a test function
    
    @boundary(u, 1, DIRICHLET, "0")   # boundary condition for BID 1 is Dirichlet with value 0
    
    @coefficient(f, "-100*pi*pi*sin(10*pi*x)*sin(pi*x) - pi*pi*sin(10*pi*x)*sin(pi*x) + 20*pi*pi*cos(10*pi*x)*cos(pi*x)")
    @weakForm(u, "-grad(u)*grad(v) - f*v")
    
    solve(u);
    
    @test u.values â‰ˆ [0.0 0.007264663914605509 0.05548378646533119 0.12484637583452016 0.15643425958670426 0.17647438300152807 0.1650622694050659 0.07585602863881073 -3.18213108566208e-7 -0.08967487100569765 -0.27059932188124447 -0.4139469093765388 -0.45399050535000174 -0.4605211955511816 -0.36945146486624963 -0.15155197785112917 3.7983893341752906e-8 0.16330652187232222 0.45922617845751285 0.6625269266647964 0.7071065009300601 0.6994885007032536 0.5376757159007113 0.2124125258320575 -1.7950660884113977e-7 -0.22095300578015584 -0.6029011670836534 -0.8462545590774985 -0.8910063400567771 -0.8699853400973686 -0.6532688407583587 -0.252480951710699 1.981126460412799e-8 0.2569707986099558 0.6875597406253492 0.947144674065913 0.9876880578775071 0.9553217523679873 0.7049152826117471 0.2678346288297865 8.551661062785119e-15 -0.2678346288297711 -0.7049152826117286 -0.9553217523679708 -0.9876880578774916 -0.9471446740658984 -0.6875597406253366 -0.25697079860994104 -1.981125235229519e-8 0.2524809517107118 0.653268840758366 0.8699853400973747 0.8910063400567827 0.8462545590775031 0.6029011670836568 0.22095300578015412 1.7950660767756746e-7 -0.2124125258320607 -0.5376757159007127 -0.6994885007032564 -0.7071065009300638 -0.6625269266648008 -0.45922617845751873 -0.1633065218723258 -3.7983897907165075e-8 0.15155197785112567 0.36945146486624425 0.46052119555117654 0.4539905053499972 0.4139469093765345 0.2705993218812414 0.08967487100569373 3.18213105351286e-7 -0.07585602863881424 -0.16506226940506788 -0.1764743830015293 -0.15643425958670545 -0.12484637583452105 -0.055483786465332134 -0.007264663914605848 0.0]

    # Write your tests here.
end
